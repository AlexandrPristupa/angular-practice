function chatCtrl(e,a){var t=this,s=a();t.messages=e.getMessages(),t.shownMessages=e.shownMessages(),t.sendMassege=function(){if(null!=t.author)var a={authorName:t.author.displayName,authorId:t.author.uid,authorPhoto:t.author.photoURL,text:t.newMesssage};else alert("Сначала зарег");""!=t.newMesssage?(e.sendMassege(a),t.newMesssage=""):alert("Введите сообщение!")},t.login=function(){s.$signInWithPopup("google")},t.logout=function(){s.$signOut()},s.$onAuthStateChanged(function(e){t.author=e})}function chatServise(e){var a=firebase.database().ref().child("messages"),t={};return t.getMessages=function(){return e(a)},t.shownMessages=function(){return e(a.limitToLast(15))},t.sendMassege=function(e){t.getMessages().$add(e)},t}function enterSenter(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterSenter)}),a.preventDefault())})}}var config={apiKey:"AIzaSyCrPVWKMb8bQZXWrWQOxd7mMhWi7tYd7o0",authDomain:"cbschat-80ef3.firebaseapp.com",databaseURL:"https://cbschat-80ef3.firebaseio.com",storageBucket:"cbschat-80ef3.appspot.com",messagingSenderId:"412720577519"};firebase.initializeApp(config),angular.module("cbsChat",["firebase"]),angular.module("cbsChat").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("cbsChat").factory("ChatService",["$firebaseArray",chatServise]),angular.module("cbsChat").directive("enterSenter",[enterSenter]);